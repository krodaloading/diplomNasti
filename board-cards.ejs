<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>üìã –î–æ—Å–∫–∞ –∑–∞–¥–∞—á</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <a href="/calendar" class="calendar-btn">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</a>
    </div>

    <div class="board-columns">
      <% boards.forEach(board => { %>
      <div class="board-column" id="board-<%= board.id %>">
        <div class="board-title" id="title-<%= board.id %>">
          <h3 onclick="openModal('<%= board.title %>', '<%= board.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è' %>')">üìã <%= board.title %></h3>
          <button onclick="toggleEdit('<%= board.id %>', true)">‚úèÔ∏è</button>
        </div>

        <form action="/edit-board/<%= board.id %>" method="POST" class="edit-board-form hidden" id="form-<%= board.id %>">
          <input type="text" name="title" value="<%= board.title %>" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏" />
          <% if (board.cards && board.cards.length > 0) { %>
            <% board.cards.forEach(card => { %>
              <input type="text" name="cards" value="<%= card.text %>" />
            <% }) %>
          <% } else { %>
            <p>–ù–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫</p>
          <% } %>
          <input type="text" name="cards" placeholder="–ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞" />
          <div class="button-group">
            <button type="submit">üíæ</button>
            <button type="button" class="add" onclick="addCardInput('<%= board.id %>')">‚ûï</button>
            <button type="button" class="cancel" onclick="toggleEdit('<%= board.id %>', false)">‚úñ</button>
          </div>
        </form>

        <ul class="card-list" id="cards-<%= board.id %>">
          <% if (board.cards && board.cards.length > 0) { %>
            <% board.cards.forEach(card => { %>
              <li class="card-item"><%= card.text %></li>
            <% }) %>
          <% } else { %>
            <li class="card-item">–ù–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫</li>
          <% } %>
        </ul>
      </div>
      <% }) %>

      <form action="/create-board" method="POST" class="board-column">
        <h3>‚ûï –ù–æ–≤—ã–π —Å–ø–∏—Å–æ–∫</h3>
        <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞" required />
        <div class="top-bar">
          <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">√ó</span>
      <h3 id="modal-title">–ù–∞–∑–≤–∞–Ω–∏–µ</h3>
      <p id="modal-description">–û–ø–∏—Å–∞–Ω–∏–µ</p>
    </div>
  </div>

  <script src="/js/board.js"></script>
</body>
</html>
